{"version":3,"file":"static/js/825.90ddc7e8.chunk.js","mappings":"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","sources":["../node_modules/uuid/dist/esm-browser/rng.js","components/Nweet.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v4.js","components/NweetFactory.js","routes/Home.js"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import React, { useState } from \"react\";\nimport { doc, deleteDoc, updateDoc } from \"firebase/firestore\";\nimport { dbService, storageService } from \"fbase\";\nimport { deleteObject, ref } from \"firebase/storage\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrash, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nconst Nweet = ({ nweetObj, isOwner }) => {\n  const [editing, setEditing] = useState(false);\n  const [newNweet, setNewNweet] = useState(nweetObj.text);\n\n  const onDeleteClick = async () => {\n    const ok = window.confirm(\"Are you sure you want to delete this nweet?\");\n    const nweetTextRef = doc(dbService, \"nweets\", `${nweetObj.id}`);\n    const urlRef = ref(storageService, nweetObj.attachmentUrl);\n    if (ok) {\n      // delete nweet\n      await deleteDoc(nweetTextRef);\n      await deleteObject(urlRef);\n    }\n  };\n\n  const toggleEditing = () => setEditing((prev) => !prev);\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    const updateRef = doc(dbService, \"nweets\", `${nweetObj.id}`);\n    await updateDoc(updateRef, {\n      text: newNweet,\n    });\n    console.log(nweetObj, newNweet);\n    setEditing(false);\n  };\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setNewNweet(value);\n  };\n  return (\n    <div className=\"nweet\">\n      {editing ? (\n        <>\n          {isOwner && (\n            <>\n              <form onSubmit={onSubmit} className=\"container nweetEdit\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Edit your nweet\"\n                  value={newNweet}\n                  required\n                  onChange={onChange}\n                  autoFocus\n                  className=\"formInput\"\n                />\n                <input type=\"submit\" value={\"Update Nweet\"} className=\"formBtn\"/>\n              </form>\n              <span onClick={toggleEditing} className=\"formBtn cancelBtn\">\n                Cancel\n              </span>\n            </>\n          )}\n        </>\n      ) : (\n        <>\n          <h4>{nweetObj.text}</h4>\n          {nweetObj.attachmentUrl && <img src={nweetObj.attachmentUrl} />}\n          {isOwner && (\n            <div className=\"nweet__actions\">\n              <span onClick={onDeleteClick}>\n                <FontAwesomeIcon icon={faTrash} />\n              </span>\n              <span onClick={toggleEditing}>\n                <FontAwesomeIcon icon={faPencilAlt} />\n              </span>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Nweet;\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { dbService, storageImagesRef } from \"fbase\";\nimport React, { useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { uploadString, ref, getDownloadURL } from \"firebase/storage\";\nimport { addDoc, collection } from \"firebase/firestore\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faTimes } from \"@fortawesome/free-solid-svg-icons\";\n\nconst NweetFactory = ({ userObj }) => {\n  const [nweet, setNweet] = useState(\"\");\n  const [attachment, setAttachment] = useState(\"\");\n  const onSubmit = async (event) => {\n    if (nweet === \"\") {\n      return;\n    }\n    event.preventDefault();\n    const fileName = `${userObj.uid}/${uuidv4()}`;\n    const fileRef = ref(storageImagesRef, fileName);\n    let attachmentUrl = \"\";\n    try {\n      if (attachment !== \"\") {\n        const attachmentRef = await uploadString(\n          fileRef,\n          attachment,\n          \"data_url\"\n        );\n        console.log(attachmentRef);\n        attachmentUrl = await getDownloadURL(fileRef);\n      }\n      const nweetsCollection = collection(dbService, \"nweets\");\n      await addDoc(nweetsCollection, {\n        text: nweet,\n        createdAt: Date.now(),\n        creatorId: userObj.uid,\n        attachmentUrl,\n      });\n      setNweet(\"\");\n      setAttachment(\"\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setNweet(value);\n  };\n\n  const onFileChange = (event) => {\n    const {\n      target: { files },\n    } = event;\n    const theFile = files[0];\n    const reader = new FileReader();\n    reader.onloadend = (finishedEvent) => {\n      const {\n        currentTarget: { result },\n      } = finishedEvent;\n      setAttachment(result);\n    };\n    reader.readAsDataURL(theFile);\n  };\n\n  const onClearAttachment = () => setAttachment(\"\");\n  return (\n    <form onSubmit={onSubmit} className=\"factoryForm\">\n      <div className=\"factoryInput__container\">\n        <input\n          className=\"factoryInput__input\"\n          value={nweet}\n          onChange={onChange}\n          type=\"text\"\n          placeholder=\"What's on your mind?\"\n          maxLength={120}\n        />\n        <input type=\"submit\" value=\"&rarr;\" className=\"factoryInput__arrow\" />\n      </div>\n      <label htmlFor=\"attach-file\" className=\"factoryInput__label\">\n        <span>Add photos</span>\n        <FontAwesomeIcon icon={faPlus} />\n      </label>\n      <input\n        id=\"attach-file\"\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={onFileChange}\n        style={{\n          opacity: 0,\n        }}\n      />\n      {attachment && (\n          <div className=\"factoryForm__attachment\">\n          <img\n            src={attachment}\n            style={{\n              backgroundImage: attachment,\n            }}\n          />\n          <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\n            <span>Remove</span>\n            <FontAwesomeIcon icon={faTimes} />\n          </div>\n        </div>\n      )}\n    </form>\n  );\n};\nexport default NweetFactory;","import React, { useEffect, useState } from \"react\";\nimport { dbService, storageImagesRef } from \"fbase\";\nimport {\n  collection,\n  addDoc,\n  onSnapshot,\n  query,\n  orderBy,\n} from \"firebase/firestore\";\nimport Nweet from \"components/Nweet\";\nimport NweetFactory from \"components/NweetFactory\";\n\nconst Home = ({ userObj }) => {\n  const [nweets, setNweets] = useState([]); \n\n  useEffect(() => {\n    const q = query(\n      collection(dbService, \"nweets\"),\n      orderBy(\"createdAt\", \"desc\")\n    );\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      const newNweets = [];\n      querySnapshot.forEach((doc) => {\n        newNweets.push({ id: doc.id, ...doc.data() });\n      });\n      setNweets(newNweets);\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, []);\n\n  \n\n  return (\n    <div className=\"container\">\n      <NweetFactory userObj={userObj}/>\n      <div style={{ marginTop: 30 }}>\n        {nweets.map((nweet) => (\n          <Nweet\n            key={nweet.id}\n            nweetObj={nweet}\n            isOwner={nweet.creatorId === userObj.uid}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\nexport default Home;\n"],"names":["getRandomValues","nweetObj","isOwner","useState","editing","setEditing","text","newNweet","setNewNweet","onDeleteClick","ok","window","confirm","nweetTextRef","doc","dbService","id","urlRef","ref","storageService","attachmentUrl","deleteDoc","deleteObject","toggleEditing","prev","onSubmit","event","preventDefault","updateRef","updateDoc","console","log","className","type","placeholder","value","required","onChange","target","autoFocus","onClick","src","icon","faTrash","faPencilAlt","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","REGEX","byteToHex","i","push","toString","substr","arr","offset","arguments","length","undefined","toLowerCase","validate","TypeError","options","buf","rnds","random","stringify","userObj","nweet","setNweet","attachment","setAttachment","fileName","uid","uuidv4","fileRef","storageImagesRef","uploadString","attachmentRef","getDownloadURL","nweetsCollection","collection","addDoc","createdAt","Date","now","creatorId","maxLength","htmlFor","faPlus","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","result","currentTarget","readAsDataURL","style","opacity","backgroundImage","faTimes","nweets","setNweets","useEffect","q","query","orderBy","unsubscribe","onSnapshot","querySnapshot","newNweets","forEach","data","marginTop","map"],"sourceRoot":""}